# Story SEO-001.3: Course Structured Data Implementation

**Epic:** SEO-001 - SEO & AEO Enhancement
**Story ID:** SEO-001.3
**Priority:** High
**Estimated Effort:** 1 day
**Status:** Done

---

## User Story

**As a** search engine / AI assistant
**I want** structured data (JSON-LD schemas) on course pages
**So that** I can understand course content and display rich results in search

---

## Background

Course pages currently lack structured data, which means:
- ❌ No rich results in Google Search (no course cards)
- ❌ AI assistants can't easily extract course information
- ❌ Missing breadcrumb navigation for SEO
- ❌ No organization/provider information

Adding structured data will:
- ✅ Enable rich results in Google Search
- ✅ Help AI assistants understand and recommend courses
- ✅ Improve course discoverability
- ✅ Establish WEB3DEV as authoritative education provider

---

## Technical Requirements

### Schemas to Implement

1. **Course Schema** - For individual course pages
2. **Breadcrumb Schema** - For navigation hierarchy
3. **Organization Schema** - For WEB3DEV as provider
4. **HowTo Schema** - For tutorial-style courses (optional)

---

## Implementation

### 1. Update Course Page (`pages/courses/[id].js`)

```jsx
import SEOHead from '../../components/SEO';
import {
  buildCourseSchema,
  buildBreadcrumbSchema,
  buildOrganizationSchema
} from '../../components/SEO/schemas';

export default function CoursePage({ course }) {
  // Build schemas
  const courseSchema = buildCourseSchema(course);
  const breadcrumbSchema = buildBreadcrumbSchema([
    { name: 'Home', url: 'https://build.w3d.community' },
    { name: 'Courses', url: 'https://build.w3d.community/courses' },
    { name: course.name, url: `https://build.w3d.community/courses/${course.id}` },
  ]);
  const organizationSchema = buildOrganizationSchema();

  // Combine schemas
  const schemas = [courseSchema, breadcrumbSchema, organizationSchema];

  return (
    <>
      <SEOHead
        title={course.name}
        description={course.description}
        canonical={`/courses/${course.id}`}
        keywords={course.tags || []}
        ogType="article"
        ogImage={course.image_url || 'https://build.w3d.community/og-course-default.png'}
        ogImageAlt={`${course.name} - WEB3DEV Bootcamp`}
        jsonLd={schemas}
      />
      {/* Existing course content */}
    </>
  );
}
```

---

### 2. Enhanced Course Schema Builder

Update `components/SEO/schemas.js` with comprehensive course schema:

```javascript
/**
 * Build Course Schema (schema.org/Course)
 * @param {Object} course - Course data from Firebase
 * @returns {Object} JSON-LD Course schema
 */
export function buildCourseSchema(course) {
  const schema = {
    '@context': 'https://schema.org',
    '@type': 'Course',
    name: course.name,
    description: course.description,

    // Provider
    provider: {
      '@type': 'Organization',
      name: 'WEB3DEV',
      url: 'https://build.w3d.community',
      logo: 'https://build.w3d.community/logo.png',
    },

    // Course details
    courseCode: course.id,
    educationalLevel: course.level || 'Beginner',
    teaches: course.skills || course.tags || [],

    // Image
    image: course.image_url || 'https://build.w3d.community/og-course-default.png',

    // Optional: Duration
    ...(course.duration && {
      timeRequired: course.duration // ISO 8601 format: "P10D" = 10 days
    }),

    // Optional: Price (free courses)
    offers: {
      '@type': 'Offer',
      price: '0',
      priceCurrency: 'USD',
      category: 'Free',
    },

    // Optional: Aggregated rating (if you have reviews)
    ...(course.rating && {
      aggregateRating: {
        '@type': 'AggregateRating',
        ratingValue: course.rating,
        ratingCount: course.reviewCount || 1,
        bestRating: 5,
        worstRating: 1,
      },
    }),

    // Educational credentialing
    ...(course.hasCertificate && {
      educationalCredentialAwarded: {
        '@type': 'EducationalOccupationalCredential',
        name: `${course.name} Completion Certificate`,
        description: 'NFT-based completion certificate on Ethereum blockchain',
        credentialCategory: 'certificate',
      },
    }),

    // Course instance (cohort-based)
    ...(course.cohort && {
      hasCourseInstance: {
        '@type': 'CourseInstance',
        name: `${course.name} - ${course.cohort.name}`,
        courseMode: 'online',
        ...(course.cohort.startDate && {
          startDate: course.cohort.startDate,
        }),
        ...(course.cohort.endDate && {
          endDate: course.cohort.endDate,
        }),
      },
    }),

    // Language
    inLanguage: course.language || 'pt-BR',
  };

  return schema;
}
```

---

### 3. Update Homepage (`pages/index.js`)

Add Organization schema to homepage:

```jsx
import SEOHead from '../components/SEO';
import { buildOrganizationSchema } from '../components/SEO/schemas';

export default function Home({ course }) {
  const organizationSchema = buildOrganizationSchema();

  return (
    <>
      <SEOHead
        title="Web3 Bootcamp - Learn Blockchain Development | WEB3DEV"
        description="Join WEB3DEV bootcamp to learn blockchain, smart contracts, and Web3 technologies. Free courses in Portuguese with NFT certificates. Start your Web3 journey today!"
        canonical="/"
        keywords={['web3', 'blockchain', 'bootcamp', 'smart contracts', 'NFT', 'Solidity', 'DeFi', 'curso blockchain']}
        ogImage="https://build.w3d.community/og-home.png"
        jsonLd={organizationSchema}
      />
      {/* Existing homepage content */}
    </>
  );
}
```

---

### 4. Update Courses Listing (`pages/courses/index.js`)

Add breadcrumb schema:

```jsx
import SEOHead from '../../components/SEO';
import { buildBreadcrumbSchema } from '../../components/SEO/schemas';

export default function Courses({ allCourses }) {
  const breadcrumbSchema = buildBreadcrumbSchema([
    { name: 'Home', url: 'https://build.w3d.community' },
    { name: 'Courses', url: 'https://build.w3d.community/courses' },
  ]);

  return (
    <>
      <SEOHead
        title="All Courses - Web3 Bootcamp"
        description="Browse all Web3DEV bootcamp courses. Learn smart contracts, NFTs, DeFi, and blockchain development with hands-on projects and NFT certificates."
        canonical="/courses"
        keywords={['web3 courses', 'blockchain courses', 'smart contract training', 'NFT development']}
        jsonLd={breadcrumbSchema}
      />
      {/* Existing courses listing */}
    </>
  );
}
```

---

## Acceptance Criteria

### Course Pages
- [ ] All course pages include Course schema
- [ ] Course schema includes: name, description, provider, level, image
- [ ] Course schema includes offers (free)
- [ ] Course schema includes NFT certificate info (if applicable)
- [ ] Course schema validated with Google Rich Results Test
- [ ] Breadcrumb schema shows: Home > Courses > [Course Name]

### Homepage
- [ ] Homepage includes Organization schema
- [ ] Organization schema includes: name, url, logo, sameAs links
- [ ] Schema validated with no errors

### Courses Listing
- [ ] Courses page includes Breadcrumb schema
- [ ] Breadcrumb shows: Home > Courses

### Validation
- [ ] All schemas validate with Google Rich Results Test
- [ ] All schemas validate with Schema.org validator
- [ ] No critical errors in Google Search Console
- [ ] Schemas render correctly in page source (view source)

---

## Testing Instructions

### Manual Testing

1. **Navigate to a course page** (e.g., `/courses/solidity-smart-contract`)

2. **View page source** (Ctrl+U or Cmd+Option+U)

3. **Find JSON-LD script tag:**
   ```html
   <script type="application/ld+json">
   [
     {
       "@context": "https://schema.org",
       "@type": "Course",
       "name": "Solidity Smart Contract",
       ...
     }
   ]
   </script>
   ```

4. **Copy JSON-LD content**

5. **Validate with Google Rich Results Test:**
   - Go to: https://search.google.com/test/rich-results
   - Enter course page URL or paste code
   - Verify "Course" rich result is detected
   - Check for errors/warnings

6. **Validate with Schema.org:**
   - Go to: https://validator.schema.org/
   - Paste JSON-LD
   - Verify no errors

7. **Repeat for homepage and courses listing**

### Automated Testing (Optional)

```javascript
// __tests__/pages/courses/[id].test.js
import { render } from '@testing-library/react';
import CoursePage from '../../../pages/courses/[id]';

describe('Course Page Structured Data', () => {
  it('includes Course schema', () => {
    const mockCourse = {
      id: 'test-course',
      name: 'Test Course',
      description: 'Test description',
      image_url: '/test.png',
    };

    render(<CoursePage course={mockCourse} />);

    const scriptTag = document.querySelector('script[type="application/ld+json"]');
    expect(scriptTag).toBeTruthy();

    const schemas = JSON.parse(scriptTag.innerHTML);
    const courseSchema = schemas.find(s => s['@type'] === 'Course');

    expect(courseSchema).toBeDefined();
    expect(courseSchema.name).toBe('Test Course');
    expect(courseSchema.provider.name).toBe('WEB3DEV');
  });
});
```

---

## Definition of Done

- [ ] Course schema implemented on all course pages
- [ ] Breadcrumb schema implemented on all pages
- [ ] Organization schema on homepage
- [ ] All schemas validated with Google Rich Results Test (no errors)
- [ ] All schemas validated with Schema.org validator
- [ ] Schemas tested on dev environment
- [ ] Code reviewed
- [ ] Documentation updated (if needed)
- [ ] Merged to main branch
- [ ] Deployed to production
- [ ] Verified in Google Search Console (no schema errors)

---

## Related Stories

- **SEO-001.1:** SEO Component Infrastructure (provides schema builders)
- **SEO-001.2:** Static SEO Files (sitemap references these pages)
- **SEO-001.4:** Page Meta Enhancement (complements structured data)

---

## References

- **AEO Checklist:** `.bmad-core/checklists/aeo-optimization.md` (Section 2)
- **Schema.org Course:** https://schema.org/Course
- **Schema.org Breadcrumb:** https://schema.org/BreadcrumbList
- **Schema.org Organization:** https://schema.org/Organization
- **Google Course Rich Results:** https://developers.google.com/search/docs/appearance/structured-data/course
- **Google Rich Results Test:** https://search.google.com/test/rich-results

---

**Created:** 2026-02-16
**Status:** Done
**Assigned To:** BMad
