# Story SEO-001.1: SEO Component Infrastructure

**Epic:** SEO-001 - SEO & AEO Enhancement
**Story ID:** SEO-001.1
**Priority:** Critical
**Estimated Effort:** 1 day
**Status:** Done

---

## User Story

**As a** platform developer
**I want** a reusable SEO component for Next.js pages
**So that** I can consistently implement SEO best practices across all pages with minimal code duplication

---

## Background

The bootcamp platform currently has basic meta tags in `pages/_document.js` and individual pages, but:
- Meta tag implementation is inconsistent across pages
- No support for structured data (JSON-LD)
- Missing canonical URLs
- No centralized SEO configuration

We need a reusable component that makes it easy to add comprehensive SEO to any page.

---

## Technical Requirements

### Component API

Create `components/SEO/SEOHead.js` with the following props:

```typescript
interface SEOHeadProps {
  // Basic Meta
  title: string;
  description: string;
  canonical?: string;
  keywords?: string[];

  // Open Graph
  ogType?: 'website' | 'article' | 'profile';
  ogImage?: string;
  ogImageAlt?: string;
  ogImageWidth?: number;
  ogImageHeight?: number;

  // Twitter Card
  twitterCard?: 'summary' | 'summary_large_image';
  twitterSite?: string;
  twitterCreator?: string;

  // Structured Data (JSON-LD)
  jsonLd?: object | object[];

  // Additional
  noindex?: boolean;
  nofollow?: boolean;
  locale?: string;
}
```

### Component Implementation

```jsx
import Head from 'next/head';

export default function SEOHead({
  title,
  description,
  canonical,
  keywords = [],
  ogType = 'website',
  ogImage,
  ogImageAlt,
  ogImageWidth = 1200,
  ogImageHeight = 630,
  twitterCard = 'summary_large_image',
  twitterSite = '@web3dev',
  twitterCreator,
  jsonLd,
  noindex = false,
  nofollow = false,
  locale = 'pt-BR',
}) {
  // Build canonical URL
  const siteUrl = process.env.NEXT_PUBLIC_SITE_URL || 'https://build.w3d.community';
  const canonicalUrl = canonical
    ? `${siteUrl}${canonical}`
    : undefined;

  // Build full title
  const fullTitle = title.includes('WEB3DEV')
    ? title
    : `${title} | WEB3DEV Bootcamp`;

  return (
    <Head>
      {/* Primary Meta Tags */}
      <title>{fullTitle}</title>
      <meta name="title" content={fullTitle} />
      <meta name="description" content={description} />
      {keywords.length > 0 && (
        <meta name="keywords" content={keywords.join(', ')} />
      )}
      {canonicalUrl && <link rel="canonical" href={canonicalUrl} />}
      <meta name="viewport" content="width=device-width, initial-scale=1.0" />

      {/* Robots */}
      {(noindex || nofollow) && (
        <meta
          name="robots"
          content={`${noindex ? 'noindex' : 'index'},${nofollow ? 'nofollow' : 'follow'}`}
        />
      )}

      {/* Open Graph / Facebook */}
      <meta property="og:type" content={ogType} />
      {canonicalUrl && <meta property="og:url" content={canonicalUrl} />}
      <meta property="og:title" content={fullTitle} />
      <meta property="og:description" content={description} />
      <meta property="og:site_name" content="WEB3DEV Bootcamp" />
      <meta property="og:locale" content={locale} />
      {ogImage && (
        <>
          <meta property="og:image" content={ogImage} />
          {ogImageAlt && <meta property="og:image:alt" content={ogImageAlt} />}
          <meta property="og:image:width" content={String(ogImageWidth)} />
          <meta property="og:image:height" content={String(ogImageHeight)} />
        </>
      )}

      {/* Twitter */}
      <meta property="twitter:card" content={twitterCard} />
      {canonicalUrl && <meta property="twitter:url" content={canonicalUrl} />}
      <meta property="twitter:title" content={fullTitle} />
      <meta property="twitter:description" content={description} />
      {ogImage && <meta property="twitter:image" content={ogImage} />}
      {twitterSite && <meta property="twitter:site" content={twitterSite} />}
      {twitterCreator && <meta property="twitter:creator" content={twitterCreator} />}

      {/* JSON-LD Structured Data */}
      {jsonLd && (
        <script
          type="application/ld+json"
          dangerouslySetInnerHTML={{
            __html: JSON.stringify(
              Array.isArray(jsonLd) ? jsonLd : [jsonLd],
              null,
              2
            ),
          }}
        />
      )}
    </Head>
  );
}
```

---

## File Structure

Create the following files:

```
components/
└── SEO/
    ├── SEOHead.js          # Main component
    ├── index.js            # Export
    ├── schemas.js          # JSON-LD schema builders
    └── README.md           # Usage documentation
```

---

## Schema Builders (`components/SEO/schemas.js`)

Create helper functions for common structured data:

```javascript
// Organization Schema
export function buildOrganizationSchema() {
  return {
    '@context': 'https://schema.org',
    '@type': 'Organization',
    name: 'WEB3DEV',
    url: 'https://build.w3d.community',
    logo: 'https://build.w3d.community/logo.png',
    sameAs: [
      'https://github.com/w3b3d3v',
      'https://twitter.com/web3dev',
      'https://discord.w3d.community',
    ],
  };
}

// Course Schema
export function buildCourseSchema(course) {
  return {
    '@context': 'https://schema.org',
    '@type': 'Course',
    name: course.name,
    description: course.description,
    provider: {
      '@type': 'Organization',
      name: 'WEB3DEV',
      url: 'https://build.w3d.community',
    },
    educationalLevel: course.level || 'Beginner',
    ...(course.duration && { timeRequired: course.duration }),
    ...(course.image && { image: course.image }),
  };
}

// Breadcrumb Schema
export function buildBreadcrumbSchema(items) {
  return {
    '@context': 'https://schema.org',
    '@type': 'BreadcrumbList',
    itemListElement: items.map((item, index) => ({
      '@type': 'ListItem',
      position: index + 1,
      name: item.name,
      item: item.url,
    })),
  };
}

// FAQ Schema
export function buildFAQSchema(faqs) {
  return {
    '@context': 'https://schema.org',
    '@type': 'FAQPage',
    mainEntity: faqs.map(faq => ({
      '@type': 'Question',
      name: faq.question,
      acceptedAnswer: {
        '@type': 'Answer',
        text: faq.answer,
      },
    })),
  };
}
```

---

## Usage Examples

### Basic Page Usage

```jsx
// pages/index.js
import SEOHead from '../components/SEO';

export default function Home() {
  return (
    <>
      <SEOHead
        title="Web3 Bootcamp - Learn Blockchain Development"
        description="Join WEB3DEV bootcamp to learn blockchain, smart contracts, and Web3 technologies. Free courses with NFT certificates."
        canonical="/"
        keywords={['web3', 'blockchain', 'bootcamp', 'smart contracts', 'NFT']}
        ogImage="https://build.w3d.community/og-home.png"
      />
      {/* Page content */}
    </>
  );
}
```

### Course Page with Structured Data

```jsx
// pages/courses/[id].js
import SEOHead from '../../components/SEO';
import { buildCourseSchema, buildBreadcrumbSchema } from '../../components/SEO/schemas';

export default function CoursePage({ course }) {
  const schemas = [
    buildCourseSchema(course),
    buildBreadcrumbSchema([
      { name: 'Home', url: 'https://build.w3d.community' },
      { name: 'Courses', url: 'https://build.w3d.community/courses' },
      { name: course.name, url: `https://build.w3d.community/courses/${course.id}` },
    ]),
  ];

  return (
    <>
      <SEOHead
        title={course.name}
        description={course.description}
        canonical={`/courses/${course.id}`}
        ogType="article"
        ogImage={course.image_url}
        jsonLd={schemas}
      />
      {/* Course content */}
    </>
  );
}
```

---

## Acceptance Criteria

### Functional
- [ ] SEOHead component created in `components/SEO/SEOHead.js`
- [ ] Component accepts all specified props
- [ ] Component integrates with Next.js `<Head>`
- [ ] Canonical URLs built correctly from env var + path
- [ ] Title automatically appends " | WEB3DEV Bootcamp" if not present
- [ ] JSON-LD schema rendered correctly in `<script>` tag
- [ ] Multiple schemas can be passed as array
- [ ] Robots meta tag only added when noindex/nofollow is true

### Schema Helpers
- [ ] `schemas.js` created with helper functions
- [ ] `buildOrganizationSchema()` works
- [ ] `buildCourseSchema(course)` works
- [ ] `buildBreadcrumbSchema(items)` works
- [ ] `buildFAQSchema(faqs)` works

### Documentation
- [ ] README.md created with usage examples
- [ ] Component props documented with TypeScript types
- [ ] Examples show basic and advanced usage
- [ ] Schema helpers documented

### Testing
- [ ] Component renders without errors
- [ ] Meta tags appear in page `<head>`
- [ ] JSON-LD validates with Google Rich Results Test
- [ ] Canonical URLs are absolute (include domain)
- [ ] Open Graph image dimensions default to 1200x630

---

## Testing Instructions

### Manual Testing

1. **Create test page:**
   ```jsx
   // pages/test-seo.js
   import SEOHead from '../components/SEO';

   export default function TestSEO() {
     return (
       <>
         <SEOHead
           title="Test Page"
           description="This is a test page for SEO component"
           canonical="/test-seo"
           keywords={['test', 'seo']}
           ogImage="/test-image.png"
         />
         <div>
           <h1>SEO Component Test</h1>
           <p>View source to check meta tags</p>
         </div>
       </>
     );
   }
   ```

2. **View page source** and verify all meta tags present

3. **Test with Google Rich Results Test:**
   - Go to https://search.google.com/test/rich-results
   - Enter test page URL
   - Verify no errors

4. **Test with OpenGraph Debugger:**
   - Go to https://developers.facebook.com/tools/debug/
   - Enter test page URL
   - Verify image and meta tags appear

### Automated Testing (Optional)

```javascript
// __tests__/components/SEO/SEOHead.test.js
import { render } from '@testing-library/react';
import SEOHead from '../../../components/SEO/SEOHead';

describe('SEOHead Component', () => {
  it('renders title correctly', () => {
    render(
      <SEOHead
        title="Test Title"
        description="Test description"
      />
    );

    expect(document.title).toBe('Test Title | WEB3DEV Bootcamp');
  });

  it('renders JSON-LD schema', () => {
    const schema = { '@type': 'Organization', name: 'Test' };
    render(
      <SEOHead
        title="Test"
        description="Test"
        jsonLd={schema}
      />
    );

    const scriptTag = document.querySelector('script[type="application/ld+json"]');
    expect(scriptTag).toBeTruthy();
    expect(JSON.parse(scriptTag.innerHTML)).toEqual([schema]);
  });
});
```

---

## Environment Variables

Add to `.env.local`:

```bash
NEXT_PUBLIC_SITE_URL=https://build.w3d.community
```

Add to `.env.example`:

```bash
# SEO Configuration
NEXT_PUBLIC_SITE_URL=https://build.w3d.community
```

---

## Implementation Notes

1. **Component Location:** Place in `components/SEO/` (create new directory)
2. **TypeScript:** Use JSDoc comments for type hints if not using TypeScript
3. **Default Values:** Provide sensible defaults for all optional props
4. **Validation:** Consider adding prop-types or TypeScript for validation
5. **Performance:** Component is lightweight, no performance concerns
6. **Accessibility:** Ensure meta tags support screen readers

---

## Dependencies

- Next.js (already installed)
- No additional packages required

---

## Definition of Done

- [ ] Component code written and follows coding standards
- [ ] Schema helper functions implemented
- [ ] README documentation complete with examples
- [ ] Component tested manually on dev environment
- [ ] Meta tags validated with Google tools
- [ ] Code reviewed by peer
- [ ] Merged to main branch

---

## Related Stories

- **SEO-001.2:** Static SEO Files (uses this component)
- **SEO-001.3:** Course Structured Data (uses schema helpers)
- **SEO-001.4:** Page Meta Enhancement (uses this component)

---

## References

- **AEO Checklist:** `.bmad-core/checklists/aeo-optimization.md`
- **Next.js Head:** https://nextjs.org/docs/api-reference/next/head
- **Schema.org:** https://schema.org/
- **Google Rich Results:** https://search.google.com/test/rich-results

---

**Created:** 2026-02-16
**Status:** Done
**Assigned To:** TBD
